import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import YourComponent from "../../utils/storybook-function";
import ASelect from "./ASelect";

<Meta title="Components/Selects" component={ASelect} />

# Selects

## Install

In the target component add:

```
import ASelect from "@cisco-ats/atomic-react/ASelect";
// or if you're able to treekshake node_modules
import {ASelect} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Simple Select</h3>
      <YourComponent>
        {() => {
          const [selectedItem, setSelectedItem] = useState(null);
          const items = [
            "Bread, Cereal, Rice, and Pasta",
            "Vegetables",
            "Fruit",
            "Milk, Yogurt, and Cheese",
            "Meat, Poultry, Fish",
            "Fats, Oils, and Sweets"
          ];
          return (
            <ASelect
              label="Food Group"
              items={items}
              placeholder="Pick a Food Group"
              onSelected={(item) => setSelectedItem(item)}
              hint={`Selected Item: ${JSON.stringify(selectedItem)}`}
            />
          );
        }}
      </YourComponent>
    </div>
  </Story>
  <Story name="usage-2">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Typical Select</h3>
      <YourComponent>
        {() => {
          const items = [
            {id: 1, name: "Bread, Cereal, Rice, and Pasta"},
            {id: 2, name: "Vegetables"},
            {id: 3, name: "Fruit", selected: true},
            {id: 4, name: "Milk, Yogurt, and Cheese"},
            {id: 5, name: "Meat, Poultry, Fish", disabled: true},
            {id: 6, name: "Fats, Oils, and Sweets"}
          ];
          const [selectedItem, setSelectedItem] = useState(items[2]);
          return (
            <ASelect
              label="Food Group"
              items={items}
              itemText="name"
              itemValue="id"
              placeholder="Pick a Food Group"
              onSelected={(item) => setSelectedItem(item)}
              hint={`Selected Item: ${JSON.stringify(selectedItem)}`}
            />
          );
        }}
      </YourComponent>
    </div>
  </Story>
  <Story name="usage-3">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Disabled Select</h3>
      <ASelect
        disabled
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Disabled"
      />
    </div>
  </Story>
  <Story name="usage-4">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Read-only Select</h3>
      <ASelect
        readOnly
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Read-only"
        items={[
          "Bread, Cereal, Rice, and Pasta",
          "Vegetables",
          "Fruit",
          "Milk, Yogurt, and Cheese",
          "Meat, Poultry, Fish",
          "Fats, Oils, and Sweets"
        ]}
      />
    </div>
  </Story>
  <Story name="usage-5">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Warning Select</h3>
      <ASelect
        validationState="warning"
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Warning"
        items={[
          "Bread, Cereal, Rice, and Pasta",
          "Vegetables",
          "Fruit",
          "Milk, Yogurt, and Cheese",
          "Meat, Poultry, Fish",
          "Fats, Oils, and Sweets"
        ]}
      />
    </div>
  </Story>
  <Story name="usage-6">
    <div style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Danger Select</h3>
      <ASelect
        validationState="danger"
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Danger"
        items={[
          "Bread, Cereal, Rice, and Pasta",
          "Vegetables",
          "Fruit",
          "Milk, Yogurt, and Cheese",
          "Meat, Poultry, Fish",
          "Fats, Oils, and Sweets"
        ]}
      />
    </div>
  </Story>
</Preview>

## Select Props

The `ASelect` component inherits passed props.

<Props of={ASelect} />

## Accessibility Notes

In addition to inheriting all of the accessibility features of `ADropdown`,
the `ASelect` surface (the box with chevron) will select and focus previous/next items
on `up` or `down` keys for the `keydown` event.

Unlike the `ADropdown` component, opening the menu will focus the selected item if one exists.

Because the HTML `select` element is not used, the surface uses the
[aria-labelledby](https://www.w3.org/TR/wai-aria/#aria-labelledby) attribute to refer to the
label, if one is present.
