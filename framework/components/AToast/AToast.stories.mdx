import {Meta, Canvas, Story, ArgsTable} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import LoremIpsum from "../../utils/lorem-ipsum";
import YourComponent from "../../utils/storybook-function";
import AToast from "./AToast";
import AButton from "../AButton";
import ADivider from "../ADivider";

<Meta title="Components/Toasts" component={AToast} />

# Toasts

## Install

Integrate with your build to [auto-import](?path=/docs/getting-started--page#integrating), or add an import in your component:

```
import AToast from "@cisco-ats/atomic-react/AToast";
// or if you're able to treekshake node_modules
import {AToast} from "@cisco-ats/atomic-react";
```

## Usage

<Canvas>
  <Story name="usage-1">
    <YourComponent>
      {() => {
        const [toastsCount, setToastsCount] = useState(3);
        const [toasts, setToasts] = useState([
          "info",
          "success",
          "warning",
          "danger"
        ]);
        const closeHandler = (key) => {
          var newToasts = toasts.slice();
          newToasts.splice(key, 1);
          setToasts(newToasts);
        };
        const addHandler = () => {
          setToastsCount(toastsCount + 1);
          setToasts([
            ...toasts,
            ["info", "success", "warning", "danger"][
              Math.floor(Math.random() * 4)
            ]
          ]);
        };
        return (
          <div>
            <h3>Examples</h3>
            {toasts.map((toast, index) => (
              <div className="my-2" key={index}>
                <AToast
                  level={toast}
                  dismissable
                  onClose={() => closeHandler(index)}
                  title={(<span className="text-capitalize">{toast}</span>)}>
                  Message for toast level: {toast}
                </AToast>
              </div>
            ))}
            <ADivider />
            <p>
              <AButton onClick={() => addHandler()}>Add Toast</AButton>
            </p>
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Canvas>

## Toast Props

The `AToast` component inherits passed props.

<ArgsTable of={AToast} />

## Accessibility Notes

The `AToast` `close` event handler is triggered both by the `click` event and by the `keyDown` event for both the `Enter` and `Space` keys.

The `AToast` close icon is tab-focusable with a visual overlay.
