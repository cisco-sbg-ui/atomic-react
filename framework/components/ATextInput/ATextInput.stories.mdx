import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import YourComponent from "../../utils/storybook-function";
import AApp from "../AApp";
import ATextInput from "./ATextInput";

<Meta title="Components/Text Inputs" component={ATextInput} />

# Text Inputs

## Install

In the target component add:

```
import ATextInput from "@cisco-ats/atomic-react/ATextInput";
// or if you're able to treekshake node_modules
import {ATextInput} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <AApp style={{maxWidth: 250}}>
      <YourComponent>
        {() => {
          const [status, setStatus] = useState("default");
          const [value, setValue] = useState("autoFocused clearable");
          return (
            <ATextInput
              autoFocus={true}
              clearable
              label="Location"
              onChange={(e) => {
                setValue(e.target.value);
                setStatus(
                  e.target.value.length === 0
                    ? "danger"
                    : e.target.value.length < 3
                    ? "warning"
                    : "default"
                );
              }}
              onClear={() => {
                setStatus("default");
              }}
              placeholder="ZIP or City, State"
              prependIcon="global-view"
              validationState={status}
              value={value}
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
</Preview>

## Text Input Props

The `ATextInput` component inherits passed props.

<Props of={ATextInput} />

## Validation States

<Preview>
  <Story name="validation-1">
    <AApp style={{maxWidth: 250}}>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Normal" />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Normal"
          prependIcon="cisco"
          appendIcon="information"
          onClickAppend={() => alert("Information!")}
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Disabled" disabled />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Disabled"
          disabled
          prependIcon="cisco"
          appendIcon="information"
        />
      </div>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Read Only State" readOnly />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Read Only State"
          readOnly
          prependIcon="cisco"
          appendIcon="information"
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="warning"
          placeholder="Warning State"
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="warning"
          placeholder="Warning"
          prependIcon="cisco"
          appendIcon="information"
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="danger"
          placeholder="Danger State"
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="danger"
          placeholder="Danger State"
          prependIcon="cisco"
          appendIcon="information"
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
    </AApp>
  </Story>
</Preview>

## Dusk Theme

<Preview style={{backgroundColor: "#18191d"}}>
  <Story name="dusk-1">
    <AApp defaultTheme="dusk" style={{maxWidth: 250}}>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Normal" />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Normal"
          prependIcon="cisco"
          appendIcon="information"
          onClickAppend={() => alert("Information!")}
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Disabled" disabled />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Disabled"
          disabled
          prependIcon="cisco"
          appendIcon="information"
        />
      </div>
      <div className="mb-4">
        <ATextInput label="Label" placeholder="Read Only State" readOnly />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          placeholder="Read Only State"
          readOnly
          prependIcon="cisco"
          appendIcon="information"
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="warning"
          placeholder="Warning State"
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="warning"
          placeholder="Warning"
          prependIcon="cisco"
          appendIcon="information"
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="danger"
          placeholder="Danger State"
        />
      </div>
      <div className="mb-4">
        <ATextInput
          label="Label"
          validationState="danger"
          placeholder="Danger State"
          prependIcon="cisco"
          appendIcon="information"
          onClickPrepend={() => alert("Cisco Systems!")}
        />
      </div>
    </AApp>
  </Story>
</Preview>

## Animations

Animations are enabled by default on the `AApp` component and can be disabled.

<Preview>
  <Story name="animations-1">
    <AApp style={{marginRight: 20}}>
      <ATextInput label="Label" placeholder="Animated" />
    </AApp>
  </Story>
  <Story name="animations-2">
    <AApp animations={false}>
      <ATextInput label="Label" placeholder="Not Animated" />
    </AApp>
  </Story>
</Preview>

## Accessibility Notes

The `ATextInput` `click` event handlers for prepended and appended icons are triggered both by the `click` event and by the `keyDown` event for both the `Enter` and `Space` keys.

Interactable prepended and appended icons are tab-focusable with a visual overlay, as well as assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [button](https://www.w3.org/TR/wai-aria/#button).
