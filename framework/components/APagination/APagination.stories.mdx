import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import YourComponent from "../../utils/storybook-function";
import APagination from "./APagination";

<Meta title="Components/Paginations" component={APagination} />

# Paginations

## Install

Integrate with your build to [auto-import](?path=/docs/getting-started--page#integrating), or add an import in your component:

```
import APagination from "@cisco-ats/atomic-react/APagination";
// or if you're able to treekshake node_modules
import {APagination} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <YourComponent>
      {() => {
        const [currentPage1, setCurrentPage1] = useState(1);
        return (
          <div>
            <h3>My Pages</h3>
            <div style={{border: "solid 2px #333"}} className="my-2 pa-2">
              Page {currentPage1}
            </div>
            <APagination
              onNext={
                currentPage1 < 3 && (() => setCurrentPage1(currentPage1 + 1))
              }
              onPrevious={
                currentPage1 > 1 && (() => setCurrentPage1(currentPage1 - 1))
              }
            />
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Preview>

<Preview>
  <Story name="usage-2">
    <YourComponent>
      {() => {
        const [currentPage2, setCurrentPage2] = useState(1);
        return (
          <div>
            <h3 className="mt-4">My Many Pages</h3>
            <div style={{border: "solid 2px #333"}} className="my-2 pa-2">
              Page {currentPage2}
            </div>
            <APagination
              onPageChange={(value) => {
                setCurrentPage2(value);
              }}
              page={currentPage2}
              showText={false}
              total={15}
            />
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Preview>

<Preview>
  <Story name="usage-3">
    <YourComponent>
      {() => {
        const [currentPage3, setCurrentPage3] = useState(1);
        const [resultsPerPage3, setResultsPerPage3] = useState(5);
        return (
          <div>
            <h3 className="mt-4">My API's Data</h3>
            <div style={{border: "solid 2px #333"}} className="my-2 pa-2">
              <ul>
                {Array.from(
                  Array(resultsPerPage3),
                  (_, x) => (currentPage3 - 1) * resultsPerPage3 + x + 1
                )
                  .map((x) => <li key={x}>Result #{x}</li>)
                  .slice(0, 145)}
              </ul>
            </div>
            <APagination
              onPageChange={(value) => {
                setCurrentPage3(value);
              }}
              onResultsPerPageChange={(value) => setResultsPerPage3(value)}
              page={currentPage3}
              resultsPerPage={resultsPerPage3}
              total={145}
            />
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Preview>

## Pagination Props

The `APagination` component inherits passed props.

<Props of={APagination} />

## Accessibility Notes

Buttons utilize the `aria-label` attribute to communicate functionality.
