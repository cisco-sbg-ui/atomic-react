import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import LoremIpsum from "../../utils/lorem-ipsum";
import YourComponent from "../../utils/storybook-function";
import AAlert from "./AAlert";
import AButton from "../AButton";
import ADivider from "../ADivider";

<Meta title="Components/Alerts" component={AAlert} />

# Alerts

## Install

Integrate with your build to [auto-import](?path=/docs/getting-started--page#integrating), or add an import in your component:

```
import AAlert from "@cisco-ats/atomic-react/AAlert";
// or if you're able to treekshake node_modules
import {AAlert} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <YourComponent>
      {() => {
        const [alertsCount, setAlertsCount] = useState(3);
        const [alerts, setAlerts] = useState([
          "info",
          "success",
          "warning",
          "danger"
        ]);
        const closeHandler = (key) => {
          var newAlerts = alerts.slice();
          newAlerts.splice(key, 1);
          setAlerts(newAlerts);
        };
        const addHandler = () => {
          setAlertsCount(alertsCount + 1);
          setAlerts([
            ...alerts,
            ["info", "success", "warning", "danger"][
              Math.floor(Math.random() * 4)
            ]
          ]);
        };
        return (
          <div>
            <h3>Examples</h3>
            {alerts.map((alert, index) => (
              <div className="my-2" key={index}>
                <AAlert
                  level={alert}
                  dismissable
                  onClose={() => closeHandler(index)}>
                  {LoremIpsum}
                </AAlert>
              </div>
            ))}
            <ADivider />
            <p>
              <AButton onClick={() => addHandler()}>Add Alert</AButton>
            </p>
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Preview>

## Alert Props

The `AAlert` component inherits passed props.

<Props of={AAlert} />

## Accessibility Notes

By default, `AAlert` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [alert](https://www.w3.org/TR/wai-aria/#alert) which denotes that the alert "is a live region with important and usually time-sensitive, information."

The `AAlert` `close` event handler is triggered both by the `click` event and by the `keyDown` event for both the `Enter` and `Space` keys.

The `AAlert` component as well as the close icon are tab-focusable with a visual overlay.
