import { Meta, Preview, Story, Props } from '@storybook/addon-docs/blocks';
import {useState} from 'react'

import AApp from '../AApp';
import AIcon from '../AIcon';
import {
  ADropdown,
  ADropdownMenu,
  ADropdownMenuItem
} from '../ADropdown';

import LoremIpsum from '../../utils/lorem-ipsum'
import YourComponent from '../../utils/storybook-function'

import {
  AAccordion,
  AAccordionPanel,
  AAccordionHeader,
  AAccordionHeaderTitle,
  AAccordionHeaderToolbar,
  AAccordionHeaderToolbarItem,
  AAccordionBody
} from "./";

<Meta title="Components/Accordions" component={AAccordion} />

# Accordions

## Install

In the target component add:

```
import {
  AAccordion,
  AAccordionPanel,
  AAccordionHeader,
  AAccordionHeaderTitle,
  AAccordionHeaderToolbar,
  AAccordionHeaderToolbarItem,
  AAccordionBody
} from "@cisco-ats/atomic-react/AAccordion";
```

## Usage

<Preview>
  <Story name="usage-1">
    <AApp>
      <YourComponent>
      {() => {
        const [active, setActive] = useState(false);
        return (
        <AAccordion bordered>
          <AAccordionPanel>
            <AAccordionHeader>
              <AAccordionHeaderTitle chevron={false}>Accordion Item 1</AAccordionHeaderTitle>
              <AAccordionHeaderToolbar>
                <AAccordionHeaderToolbarItem onClick={() => setActive(!active)}>
                  <ADropdown active={active}>
                    <AIcon>ellipsis-horizontal</AIcon>
                    <ADropdownMenu style={{top:27,right:0}}>
                      <ADropdownMenuItem>See More</ADropdownMenuItem>
                    </ADropdownMenu>
                  </ADropdown>
                </AAccordionHeaderToolbarItem>
              </AAccordionHeaderToolbar>
            </AAccordionHeader>
          </AAccordionPanel>
          <AAccordionPanel collapsed={false}>
            <AAccordionHeader>
              <AAccordionHeaderTitle>Accordion Item 2</AAccordionHeaderTitle>
            </AAccordionHeader>
            <AAccordionBody>{LoremIpsum}</AAccordionBody>
          </AAccordionPanel>
          <AAccordionPanel>
            <AAccordionHeader>
              <AAccordionHeaderTitle>Accordion Item 3</AAccordionHeaderTitle>
              <AAccordionHeaderToolbar>
                <AAccordionHeaderToolbarItem href="/" target="_blank">
                  <AIcon>information</AIcon>
                </AAccordionHeaderToolbarItem>
              </AAccordionHeaderToolbar>
            </AAccordionHeader>
            <AAccordionBody>{LoremIpsum}</AAccordionBody>
          </AAccordionPanel>
        </AAccordion>
        );
      }}
      </YourComponent>
    </AApp>
  </Story>
</Preview>

## Props

All Accordion components (`AAccordion`, `AAccordionPanel`, `AAccordionHeader`, `AAccordionHeaderTitle`, `AAccordionHeaderToolbar`, `AAccordionHeaderToolbarItem`, `AAccordionBody`) inherit passed props.

### Accordion Props
<Props of={AAccordion} />

### AccordionPanel Props
<Props of={AAccordionPanel} />

### AccordionHeader Props
<Props of={AAccordionHeader} />

### AccordionHeaderTitle Props
<Props of={AAccordionHeaderTitle} />

### AccordionHeaderToolbar Props
<Props of={AAccordionHeaderToolbar} />

### AccordionHeaderToolbarItem Props
<Props of={AAccordionHeaderToolbarItem} />

### AccordionBody Props
<Props of={AAccordionBody} />

## Dusk Theme

<Preview style={{backgroundColor: '#18191d'}}>
  <Story name="dusk-1">
    <AApp theme="dusk">
      <YourComponent>
      {() => {
        const [active, setActive] = useState(false);
        return (
        <AAccordion bordered>
          <AAccordionPanel>
            <AAccordionHeader>
              <AAccordionHeaderTitle chevron={false}>Accordion Item 1</AAccordionHeaderTitle>
              <AAccordionHeaderToolbar>
                <AAccordionHeaderToolbarItem onClick={() => setActive(!active)}>
                  <ADropdown active={active}>
                    <AIcon>ellipsis-horizontal</AIcon>
                    <ADropdownMenu style={{top:27,right:0}}>
                      <ADropdownMenuItem>See More</ADropdownMenuItem>
                    </ADropdownMenu>
                  </ADropdown>
                </AAccordionHeaderToolbarItem>
              </AAccordionHeaderToolbar>
            </AAccordionHeader>
          </AAccordionPanel>
          <AAccordionPanel collapsed={false}>
            <AAccordionHeader>
              <AAccordionHeaderTitle>Accordion Item 2</AAccordionHeaderTitle>
            </AAccordionHeader>
            <AAccordionBody>{LoremIpsum}</AAccordionBody>
          </AAccordionPanel>
          <AAccordionPanel>
            <AAccordionHeader>
              <AAccordionHeaderTitle>Accordion Item 3</AAccordionHeaderTitle>
              <AAccordionHeaderToolbar>
                <AAccordionHeaderToolbarItem href="/" target="_blank">
                  <AIcon>information</AIcon>
                </AAccordionHeaderToolbarItem>
              </AAccordionHeaderToolbar>
            </AAccordionHeader>
            <AAccordionBody>{LoremIpsum}</AAccordionBody>
          </AAccordionPanel>
        </AAccordion>
        );
      }}
      </YourComponent>
    </AApp>
  </Story>
</Preview>

## Accessibility Notes

The `AAccordionPanel` component uses the [aria-expanded](https://www.w3.org/TR/wai-aria/#aria-expanded) attribute to express the collapsed state.
If the `AAccordionPanel` component has no child `AAccordionBody` component, it will not be interactable outside of the `AAccordionHeaderToolbar` components.

By default, `AAccordionHeaderTitle` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [button](https://www.w3.org/TR/wai-aria/#button) and made tab-focusable with visual overlay.
The `AAccordionHeaderTitle` toggles the `collapsed` state in response to either the `click` event or the `keyDown` event for `Enter` or `Space` keys.

If the `AAccordionToolbarItem` has either a `href` or `onClick` handler specified, it is made tab-focusable with visual overlay.
If the `AAccordionToolbarItem` has an `onClick` handler specified, it is assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [button](https://www.w3.org/TR/wai-aria/#button).
