import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import AButton from "../AButton";
import AIcon from "../AIcon";
import {ADropdown, ADropdownMenu, ADropdownMenuItem} from "../ADropdown";

import LoremIpsum from "../../utils/lorem-ipsum";
import YourComponent from "../../utils/storybook-function";

import {
  AAccordion,
  AAccordionPanel,
  AAccordionHeader,
  AAccordionHeaderTitle,
  AAccordionBody
} from "./";

<Meta title="Components/Accordions" component={AAccordion} />

# Accordions

## Install

In the target component add:

```
import {
  AAccordion,
  AAccordionPanel,
  AAccordionHeader,
  AAccordionHeaderTitle,
  AAccordionBody
} from "@cisco-ats/atomic-react/AAccordion";
// or if you're able to treekshake node_modules
import {
  AAccordion,
  AAccordionPanel,
  AAccordionHeader,
  AAccordionHeaderTitle,
  AAccordionBody
} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <YourComponent>
      {() => {
        const [active, setActive] = useState(false);
        return (
          <AAccordion bordered>
            <AAccordionPanel>
              <AAccordionHeader>
                <AAccordionHeaderTitle chevron={false}>
                  Accordion Item 1
                </AAccordionHeaderTitle>
                <ADropdown>
                  <AButton icon tertiaryAlt onClick={() => setActive(!active)}>
                    <AIcon>ellipsis-horizontal</AIcon>
                  </AButton>
                  <ADropdownMenu
                    open={active}
                    onClose={() => setActive(false)}
                    style={{top: 27, right: 0}}>
                    <ADropdownMenuItem>See More</ADropdownMenuItem>
                  </ADropdownMenu>
                </ADropdown>
              </AAccordionHeader>
            </AAccordionPanel>
            <AAccordionPanel collapsed={false}>
              <AAccordionHeader>
                <AAccordionHeaderTitle>Accordion Item 2</AAccordionHeaderTitle>
              </AAccordionHeader>
              <AAccordionBody>{LoremIpsum}</AAccordionBody>
            </AAccordionPanel>
            <AAccordionPanel>
              <AAccordionHeader>
                <AAccordionHeaderTitle>Accordion Item 3</AAccordionHeaderTitle>
                <AButton icon tertiaryAlt href="/" target="_blank">
                  <AIcon>information</AIcon>
                </AButton>
              </AAccordionHeader>
              <AAccordionBody>{LoremIpsum}</AAccordionBody>
            </AAccordionPanel>
            <AAccordionPanel collapsed={false}>
              <AAccordionHeader>
                <AAccordionHeaderTitle>
                  Additional Accordion Item
                </AAccordionHeaderTitle>
              </AAccordionHeader>
              <AAccordionBody>{LoremIpsum}</AAccordionBody>
            </AAccordionPanel>
          </AAccordion>
        );
      }}
    </YourComponent>
  </Story>
</Preview>

## Props

All Accordion components (`AAccordion`, `AAccordionPanel`, `AAccordionHeader`, `AAccordionHeaderTitle`, `AAccordionBody`) inherit passed props.

### Accordion Props

<Props of={AAccordion} />

### AccordionPanel Props

<Props of={AAccordionPanel} />

### AccordionHeader Props

<Props of={AAccordionHeader} />

### AccordionHeaderTitle Props

<Props of={AAccordionHeaderTitle} />

### AccordionBody Props

<Props of={AAccordionBody} />

## Alternative Icons

<Preview>
  <Story name="icons-1">
    <AAccordion>
      <AAccordionPanel>
        <AAccordionHeader>
          <AAccordionHeaderTitle
            expandIcon="triangle-right"
            collapseIcon="triangle-down">
            Accordion Item 1
          </AAccordionHeaderTitle>
        </AAccordionHeader>
        <AAccordionBody>{LoremIpsum}</AAccordionBody>
      </AAccordionPanel>
      <AAccordionPanel collapsed={false}>
        <AAccordionHeader>
          <AAccordionHeaderTitle expandIcon="add" collapseIcon="subtract">
            Accordion Item 2
          </AAccordionHeaderTitle>
        </AAccordionHeader>
        <AAccordionBody>{LoremIpsum}</AAccordionBody>
      </AAccordionPanel>
      <AAccordionPanel>
        <AAccordionHeader>
          <AAccordionHeaderTitle
            expandIcon="triangle-down"
            collapseIcon="triangle-up">
            Accordion Item 3
          </AAccordionHeaderTitle>
        </AAccordionHeader>
        <AAccordionBody>{LoremIpsum}</AAccordionBody>
      </AAccordionPanel>
      <AAccordionPanel collapsed={false}>
        <AAccordionHeader>
          <AAccordionHeaderTitle>
            Additional Accordion Item
          </AAccordionHeaderTitle>
        </AAccordionHeader>
        <AAccordionBody>{LoremIpsum}</AAccordionBody>
      </AAccordionPanel>
    </AAccordion>
  </Story>
</Preview>

## Accessibility Notes

The `AAccordionPanel` component uses the [aria-expanded](https://www.w3.org/TR/wai-aria/#aria-expanded) attribute to express the collapsed state.
If the `AAccordionPanel` component has no child `AAccordionBody` component, the `AAccordionHeaderTitle` will not be interactable.

By default, `AAccordionHeaderTitle` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [button](https://www.w3.org/TR/wai-aria/#button) and made tab-focusable with visual overlay.
The `AAccordionHeaderTitle` toggles the `collapsed` state in response to either the `click` event or the `keyDown` event for `Enter` or `Space` keys.
