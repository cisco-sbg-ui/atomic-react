import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import AApp from "../AApp";
import ACheckbox from "../ACheckbox";
import ADivider from "../ADivider";
import ATree from "./ATree";
import YourComponent from "../../utils/storybook-function";

<Meta title="Components/Trees" component={ATree} />

# Trees

## Install

In the target component add:

```
import ATree from "@cisco-ats/atomic-react/ATree";
// or if you're able to treekshake node_modules
import {ATree} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <AApp style={{maxWidth: 250}}>
      <YourComponent>
        {() => {
          const [activatable, setActivatable] = useState(false);
          const [dense, setDense] = useState(false);
          const [expandOnClick, setExpandOnClick] = useState(false);
          const [hoverable, setHoverable] = useState(false);
          const [items, setItems] = useState([
            {
              content: "Live Dashboard",
              contentProps: {
                href: "https://www.google.com/",
                target: "_blank"
              },
              // It isn't necessary to specify `contentComponent`
              // as the use of "href" will be detected,
              // but included for completeness. This would be useful
              // in the case of a router integration.
              contentComponent: "a"
            },
            {
              content: "Predefined Reports Featuring Very Long Text",
              items: [
                {
                  content: "Configuration"
                },
                {
                  content: "Incident Summary"
                },
                {
                  content: "Services"
                },
                {
                  content: "Drill Down Reports",
                  items: [
                    {
                      content: "User Reports"
                    },
                    {
                      content: "Operation Reports"
                    }
                  ]
                },
                {
                  content: "Inventory"
                }
              ]
            },
            {
              content: "User Research",
              contentProps: {
                href: "https://www.google.com/",
                target: "_blank"
              },
              items: [
                {
                  content: "Usage"
                },
                {
                  content: "Documentation"
                }
              ]
            }
          ]);
          return (
            <>
              <ATree
                activatable={activatable}
                className="cisco-blue white--text"
                dense={dense}
                expandOnClick={expandOnClick}
                hoverable={hoverable}
                items={items}
                onChange={(items) => setItems(items)}
              />
              <ADivider />
              <div>
                <ACheckbox
                  checked={activatable}
                  onClick={() => setActivatable(!activatable)}>
                  Activatable
                </ACheckbox>
              </div>
              <div>
                <ACheckbox checked={dense} onClick={() => setDense(!dense)}>
                  Dense
                </ACheckbox>
              </div>
              <div>
                <ACheckbox
                  checked={expandOnClick}
                  onClick={() => setExpandOnClick(!expandOnClick)}>
                  Expand On Click
                </ACheckbox>
              </div>
              <div>
                <ACheckbox
                  checked={hoverable}
                  onClick={() => setHoverable(!hoverable)}>
                  Hoverable
                </ACheckbox>
              </div>
            </>
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
</Preview>

## Tree Props

The `ATree` component inherits passed props.

<Props of={ATree} />

## Dusk Theme

<Preview>
  <Story name="dusk-1">
    <AApp style={{maxWidth: 250}} defaultTheme="dusk">
      <YourComponent>
        {() => {
          const [items, setItems] = useState([
            {
              content: "Live Dashboard",
              contentProps: {
                href: "https://www.google.com/",
                target: "_blank"
              },
              // It isn't necessary to specify `contentComponent`
              // as the use of "href" will be detected,
              // but included for completeness. This would be useful
              // in the case of a router integration.
              contentComponent: "a"
            },
            {
              content: "Predefined Reports Featuring Very Long Text",
              items: [
                {
                  content: "Configuration"
                },
                {
                  content: "Incident Summary"
                },
                {
                  content: "Services"
                },
                {
                  content: "Drill Down Reports",
                  items: [
                    {
                      content: "User Reports"
                    },
                    {
                      content: "Operation Reports"
                    }
                  ]
                },
                {
                  content: "Inventory"
                }
              ]
            },
            {
              content: "User Research",
              contentProps: {
                href: "https://www.google.com/",
                target: "_blank"
              },
              items: [
                {
                  content: "Usage"
                },
                {
                  content: "Documentation"
                }
              ]
            }
          ]);
          return (
            <ATree
              activatable
              expandOnClick
              hoverable
              items={items}
              onChange={(items) => setItems(items)}
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
</Preview>

## Accessibility Notes

Nodes in the `ATree` component use the [aria-expanded](https://www.w3.org/TR/wai-aria/#aria-expanded) attribute to express the collapsed state.
