import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import AApp from "../AApp";
import ADivider from "../ADivider";
import YourComponent from "../../utils/storybook-function";
import ACombobox from "./ACombobox";

<Meta title="Components/Comboboxes" component={ACombobox} />

# Comboboxes

## Install

In the target component add:

```
import ACombobox from "@cisco-ats/atomic-react/ACombobox";
// or if you're able to treekshake node_modules
import {ACombobox} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Combobox with Strings</h3>
      <YourComponent>
        {() => {
          const items = [
            "Bread, Cereal, Rice, and Pasta",
            "Vegetables",
            "Fruit",
            "Milk, Yogurt, and Cheese",
            "Meat, Poultry, Fish",
            "Fats, Oils, and Sweets"
          ];
          const [value, setValue] = useState("");
          const [filteredItems, setFilteredItems] = useState(items);
          return (
            <ACombobox
              clearable
              label="Food Group"
              items={filteredItems}
              placeholder="Pick a Food Group"
              onSelected={(item) => {
                setValue(item);
              }}
              value={value}
              onChange={(e) => {
                setFilteredItems(
                  items.filter((x) =>
                    x.toLowerCase().includes(e.target.value.toLowerCase())
                  )
                );
                setValue(e.target.value);
              }}
              hint="Hint: Clearable"
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
  <Story name="usage-2">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Combobox with Objects</h3>
      <YourComponent>
        {() => {
          const items = [
            {id: 1, name: "Bread, Cereal, Rice, and Pasta"},
            {id: 2, name: "Vegetables"},
            {id: 3, name: "Fruit", selected: true},
            {id: 4, name: "Milk, Yogurt, and Cheese"},
            {id: 5, name: "Meat, Poultry, Fish", disabled: true},
            {id: 6, name: "Fats, Oils, and Sweets"}
          ];
          const [value, setValue] = useState("");
          const [filteredItems, setFilteredItems] = useState(items);
          return (
            <ACombobox
              label="Food Group"
              items={filteredItems}
              itemValue="id"
              itemText="name"
              placeholder="Pick a Food Group"
              onSelected={(item) => {
                setValue(item.name);
              }}
              value={value}
              onChange={(e) => {
                setFilteredItems(
                  items.filter((x) =>
                    x.name.toLowerCase().includes(e.target.value.toLowerCase())
                  )
                );
                setValue(e.target.value);
              }}
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
  <Story name="usage-3">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Disabled Combobox</h3>
      <ACombobox
        disabled
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Disabled"
      />
    </AApp>
  </Story>
  <Story name="usage-4">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Read-only Combobox</h3>
      <ACombobox
        readOnly
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Read-only"
      />
    </AApp>
  </Story>
  <Story name="usage-5">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Warning Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Warning"
        validationState="warning"
      />
    </AApp>
  </Story>
  <Story name="usage-6">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Danger Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Danger"
        validationState="danger"
      />
    </AApp>
  </Story>
  <Story name="usage-7">
    <AApp style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>No Data Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        noDataContent="Check again when we restock!"
        hint="Hint: No Data"
      />
    </AApp>
  </Story>
</Preview>

## Combobox Props

The `ACombobox` component inherits passed props.

<Props of={ACombobox} />

## Dusk Theme

<Preview style={{backgroundColor: "#18191d"}}>
  <Story name="dusk-1">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Combobox with Strings</h3>
      <YourComponent>
        {() => {
          const items = [
            "Bread, Cereal, Rice, and Pasta",
            "Vegetables",
            "Fruit",
            "Milk, Yogurt, and Cheese",
            "Meat, Poultry, Fish",
            "Fats, Oils, and Sweets"
          ];
          const [value, setValue] = useState("");
          const [filteredItems, setFilteredItems] = useState(items);
          return (
            <ACombobox
              clearable
              label="Food Group"
              items={filteredItems}
              placeholder="Pick a Food Group"
              onSelected={(item) => {
                setValue(item);
              }}
              value={value}
              onChange={(e) => {
                setFilteredItems(
                  items.filter((x) =>
                    x.toLowerCase().includes(e.target.value.toLowerCase())
                  )
                );
                setValue(e.target.value);
              }}
              hint="Hint: Clearable"
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
  <Story name="dusk-2">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Combobox with Objects</h3>
      <YourComponent>
        {() => {
          const items = [
            {id: 1, name: "Bread, Cereal, Rice, and Pasta"},
            {id: 2, name: "Vegetables"},
            {id: 3, name: "Fruit", selected: true},
            {id: 4, name: "Milk, Yogurt, and Cheese"},
            {id: 5, name: "Meat, Poultry, Fish", disabled: true},
            {id: 6, name: "Fats, Oils, and Sweets"}
          ];
          const [value, setValue] = useState("");
          const [filteredItems, setFilteredItems] = useState(items);
          return (
            <ACombobox
              label="Food Group"
              items={filteredItems}
              itemValue="id"
              itemText="name"
              placeholder="Pick a Food Group"
              onSelected={(item) => {
                setValue(item.name);
              }}
              value={value}
              onChange={(e) => {
                setFilteredItems(
                  items.filter((x) =>
                    x.name.toLowerCase().includes(e.target.value.toLowerCase())
                  )
                );
                setValue(e.target.value);
              }}
            />
          );
        }}
      </YourComponent>
    </AApp>
  </Story>
  <Story name="dusk-3">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Disabled Combobox</h3>
      <ACombobox
        disabled
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Disabled"
      />
    </AApp>
  </Story>
  <Story name="dusk-4">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Read-only Combobox</h3>
      <ACombobox
        readOnly
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Read-only"
      />
    </AApp>
  </Story>
  <Story name="dusk-5">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Warning Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Warning"
        validationState="warning"
      />
    </AApp>
  </Story>
  <Story name="dusk-6">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>Danger Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        hint="Hint: Danger"
        validationState="danger"
      />
    </AApp>
  </Story>
  <Story name="dusk-7">
    <AApp
      defaultTheme="dusk"
      style={{minHeight: 220, minWidth: 250, marginRight: 20}}>
      <h3>No Data Combobox</h3>
      <ACombobox
        label="Food Group"
        placeholder="Pick a Food Group"
        noDataContent="Check again when we restock!"
        hint="Hint: No Data"
      />
    </AApp>
  </Story>
</Preview>

## Accessibility Notes

`ACombobox` inherits the accessibility features of `ADropdown`.

the `ACombobox` will select and focus previous/next items on `up` or `down` keys for the `keydown` event.
