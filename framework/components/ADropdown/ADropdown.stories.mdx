import {Meta, Canvas, Story, ArgsTable} from "@storybook/addon-docs/blocks";
import {useState} from "react";

import AButton from "../AButton";
import YourComponent from "../../utils/storybook-function";
import {ADropdown, ADropdownMenu, ADropdownMenuItem} from "./";

<Meta title="Components/Dropdowns" component={ADropdown} />

# Dropdowns

## Install

Integrate with your build to [auto-import](?path=/docs/getting-started--page#integrating), or add an import in your component:

```
import {ADropdown, ADropdownMenu, ADropdownMenuItem} from "@cisco-ats/atomic-react/ADropdown";
// or if you're able to treekshake node_modules
import {ADropdown, ADropdownMenu, ADropdownMenuItem} from "@cisco-ats/atomic-react";
```

## Usage

<Canvas>
  <Story name="usage-1">
    <div style={{minHeight: 150}}>
      <YourComponent>
        {() => {
          const [isActive1, setIsActive1] = useState(false);
          const [isActive2, setIsActive2] = useState(false);
          return (
            <>
              <ADropdown>
                <AButton
                  className="mr-3"
                  aria-haspopup="true"
                  onClick={() => setIsActive1(!isActive1)}>
                  Open Menu
                </AButton>
                <ADropdownMenu
                  open={isActive1}
                  onClose={() => setIsActive1(false)}>
                  <ADropdownMenuItem onClick={() => 1} selected>
                    One - Selected
                  </ADropdownMenuItem>
                  <ADropdownMenuItem
                    href="https://www.cisco.com"
                    target="_blank">
                    Cisco.com
                  </ADropdownMenuItem>
                  <ADropdownMenuItem onClick={() => 3}>Three</ADropdownMenuItem>
                </ADropdownMenu>
              </ADropdown>
              <ADropdown>
                <AButton
                  aria-haspopup="true"
                  onClick={() => setIsActive2(!isActive2)}>
                  Open Menu
                </AButton>
                <ADropdownMenu
                  open={isActive2}
                  onClose={() => setIsActive2(false)}>
                  <ADropdownMenuItem onClick={() => 1}>One</ADropdownMenuItem>
                  <ADropdownMenuItem
                    href="https://www.cisco.com"
                    target="_blank">
                    Cisco.com
                  </ADropdownMenuItem>
                  <ADropdownMenuItem onClick={() => 3} selected>
                    Three - Selected
                  </ADropdownMenuItem>
                </ADropdownMenu>
              </ADropdown>
            </>
          );
        }}
      </YourComponent>
    </div>
  </Story>
</Canvas>

## Dropdown Props

The `ADropdown` component inherits passed props.

<ArgsTable of={ADropdown} />

## Dropdown Menu Props

The `ADropdownMenu` component inherits passed props.

<ArgsTable of={ADropdownMenu} />

## Dropdown Menu Item Props

The `ADropdownMenuItem` component inherits passed props.

<ArgsTable of={ADropdownMenuItem} />

## Router Integrations

On `ADropdownMenuItem`, set the `component` property to your router's link type, for example:

```
// With react-router:
<ADropdownMenuItem component={RouterLink} to="/">Menu Item 1</ADropdownMenuItem>
```

## Accessibility Notes

By default, `ADropdownMenu` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [menu](https://www.w3.org/TR/wai-aria/#menu).
On open, focus is set to the `ADropdownMenu`. If a close handler is specified, focus is
returned to the opener on close. `keydown` events for the `up` and `down` arrow keys will
navigate menu items, the `esc` key calls the `onClose` handler. Additionally, for the `tab`
key the menu will request to be closed and set focus to the opener, which allows native `tab`
key functionality to focus the next tab-focusable item.

By default, `ADropdownMenuItem` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [menuitem](https://www.w3.org/TR/wai-aria/#menuitem).
The `ADropdownMenuItem` `click` event handler is triggered both by the `click` event and by the `keyDown` event for the `Enter` key. This is followed up by a request to the `onClose` handler.
