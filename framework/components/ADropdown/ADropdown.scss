@import "../../styles";

$dropdown-padding: 0;
$dropdown-min-width: 150px;
$dropdown-active-z-index: 1032;
$dropdown-item-z-index: 1033;
$dropdown-item-padding: rem(0.5) rem(1.5);
$dropdown-item-width: 100%;
$dropdown-transition: visibility $transition-duration ease,
  max-height $transition-duration--fast ease, opacity $transition-duration ease;
$dropdown--state-active-transition: visibility 0s ease,
  max-height $transition-duration ease, opacity $transition-duration--fast ease;

@include theme(a-dropdown) using ($theme) {
  &__menu {
    background: map-deep-get($theme, "control", "fill-color");
    border-color: map-deep-get($theme, "control", "stroke-color");
    box-shadow: map-deep-get($theme, "dropdown", "box-shadow");
  }
  &__item {
    color: map-deep-get($theme, "base", "color");
    &--state-selected {
      color: map-deep-get($theme, "base", "inverse-color");
      background-color: map-deep-get($theme, "base", "color--selected");
    }
    &:hover {
      color: map-deep-get($theme, "base", "inverse-color");
      background-color: map-deep-get($theme, "base", "color--hover");
    }
    &:focus {
      color: map-deep-get($theme, "base", "inverse-color");
      background-color: map-deep-get($theme, "base", "color--active");
    }
  }
}

.a-dropdown {
  display: inline-block;
  position: relative;
  cursor: pointer;

  &__menu {
    @include list--unstyled;
    padding: $dropdown-padding;
    opacity: 0;
    visibility: hidden;
    display: none;
    border-width: $border-width;
    border-style: solid;
    position: absolute;
    pointer-events: auto;
    top: calc(100% + 10px);
    width: auto;
    min-width: $dropdown-min-width;
    transform: translateY(-2em);
    text-align: left;
  }
  &__item {
    text-decoration: none;
    font-size: $base-font-size;
    z-index: $dropdown-item-z-index;
    display: inline-flex;
    padding: $dropdown-item-padding;
    width: $dropdown-item-width;
    position: relative;
    text-overflow: ellipsis;
    white-space: nowrap;
    &:hover {
      text-decoration: none;
    }
    &:focus {
      text-decoration: none;
    }
  }
  &--state-active {
    .a-dropdown__menu {
      transition: opacity 0.3s;
      opacity: 1;
      visibility: visible;
      display: block;
      z-index: $dropdown-active-z-index;
      transform: translateY(0);
    }
  }
}

.a-app--animated .a-dropdown {
  .a-dropdown__menu {
    animation-name: fade-in;
    animation-duration: $transition-duration;
  }
  .a-dropdown__item {
    @include transition($transition-item);
  }
}
