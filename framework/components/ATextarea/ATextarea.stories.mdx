import {useState} from "react";
import {Meta, Preview, Story, Props} from "@storybook/addon-docs/blocks";

import LoremIpsum from "../../utils/lorem-ipsum";
import YourComponent from "../../utils/storybook-function";
import ACheckbox from "../ACheckbox";
import ATextarea from "./ATextarea";

<Meta title="Components/Textareas" component={ATextarea} />

# Textareas

## Install

Integrate with your build to [auto-import](?path=/docs/getting-started--page#integrating), or add an import in your component:

```
import ATextarea from "@cisco-ats/atomic-react/ATextarea";
// or if you're able to treekshake node_modules
import {ATextarea} from "@cisco-ats/atomic-react";
```

## Usage

<Preview>
  <Story name="usage-1">
    <div style={{maxWidth: 250}}>
      <div className="mb-4">
        <YourComponent>
          {() => {
            const [autoGrow, setAutoGrow] = useState(true);
            const [value, setValue] = useState(LoremIpsum);
            return (
              <>
                <ACheckbox
                  checked={autoGrow}
                  onClick={() => setAutoGrow(!autoGrow)}>
                  Toggle autoGrow
                </ACheckbox>
                <ATextarea
                  label="Label"
                  placeholder="Normal with autoGrow"
                  autoGrow={autoGrow}
                  disableGrammarly
                  value={value}
                  onChange={(e) => {
                    setValue(e.target.value);
                  }}
                  hint="Hint: Normal"
                />
              </>
            );
          }}
        </YourComponent>
      </div>
      <div className="mb-4">
        <ATextarea
          label="Label"
          placeholder="Disabled"
          disabled
          hint="Hint: Disabled"
        />
      </div>
      <div className="mb-4">
        <ATextarea
          label="Label"
          placeholder="Read-only State"
          readOnly
          hint="Hint: Read-only"
        />
      </div>
      <div className="mb-4">
        <ATextarea
          label="Label"
          validationState="warning"
          placeholder="Warning State"
          hint="Hint: Warning"
        />
      </div>
      <div className="mb-4">
        <ATextarea
          label="Label"
          validationState="danger"
          placeholder="Danger State"
          hint="Hint: Danger"
        />
      </div>
    </div>
  </Story>
</Preview>

## Textarea Props

The `ATextarea` component inherits passed props.

<Props of={ATextarea} />

## Validation

<Preview>
  <Story name="rules-1">
    <YourComponent>
      {() => {
        const [comments, setComments] = useState("");
        return (
          <div>
            <h3>Required Field</h3>
            <ATextarea
              label="Comments"
              onChange={(e) => {
                setComments(e.target.value);
              }}
              value={comments}
              required
              rules={[
                {
                  test: (v) =>
                    v.length < 10 || "Comments must be less than 10 characters",
                  level: "danger"
                }
              ]}
              validateOnBlur
              hint="Keep it short."
            />
          </div>
        );
      }}
    </YourComponent>
  </Story>
</Preview>
